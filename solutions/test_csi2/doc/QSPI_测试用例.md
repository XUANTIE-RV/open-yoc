## QSPI

### 概要
该文档主要描述QSPI模块的CSI2.0自动化测试AT命令。 文档中所涉及的这些命令是用来测试QSPI对内部flash读写操作是否符合预期。


### 测试原理
测试该项目，只需要一块测试板通过串口工具和PC相连。测试时PC发送AT指令启动测试，打印OK说明测试成功


### 测试流程
- 测试前应当准备好测试板
- 发送QSPI测试命令进行测试 （测试命令功能请参照下文）


### AT命令列表
以下是QSPI模块对应的测试命令列表及其功能简要介绍。

| AT命令列表                                   | 功能               |
| -------------------------------------------- | ------------------ |
| AT+SPIFLASH_QSPI_PROGRAMREAD=idx,offset,size | 测试QSPI的读写功能 |


### 参数列表
以下是GPIO模块对应的AT测试命令共用参数的简要介绍。

| 参数名字 | 释义                                                         | 取值范围         |
| -------- | ------------------------------------------------------------ | ---------------- |
| idx      | 表示使用那一组外设，0表示qspi0                               | 0x0 - 0xFFFFFFFF |
| offset   | 表示读写qspi的起始地址<br>注意：**1. offset必须为扇区大小的整数倍**<br>**2.在ram中运行可以为0，但在flash中运行必须大于该程序所用到的最大地址** | 0x0 - 0xFFFFFFFF |
| size     | 表示读写qspi的大小<br>注意：**1. size必须为扇区大小的整数倍**<br/> | 0x0 - 0xFFFFFFFF |


### 命令详解
#### AT+SPIFLASH_QSPI_PROGRAMREAD
| 命令格式             | AT+SPIFLASH_QSPI_PROGRAMREAD=idx,offset,size                 |
| -------------------- | ------------------------------------------------------------ |
| 命令功能             | 对内部的flash用qspi接口读写，比对写入的数据和读出的数据是否一致 |
| 可搭配的辅助测试命令 | 无                                                           |
| 示例                 | 步骤1:发送QSPI的读写命令<br>AT+SPIFLASH_QSPI_PROGRAMREAD=0,204800,8192<br>这表示读写qspi0,读写的起始地址是200K区域，读写的长度是8K<br>测试完成后， 板子对应串口会打印OK；否则测试失败 |
| 备注                 |                                                              |
